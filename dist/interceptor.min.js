/**
 * interceptor-js - Small library to generate interception proxies
 * @author Gion Kunz
 * @version v0.0.2
 * @link https://github.com/gionkunz/interceptor-js
 * Free to use under the WTFPL license.
 * http://www.wtfpl.net/
 */
!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.Interceptor=t()}(this,function(){return function(){"use strict";function e(e){return void 0!==e}function t(t,n){return e(n)?n:t}function n(e,t){return void 0===e||null===e||"number"==typeof e&&isNaN(e)?"null":e instanceof Date?n(e.toJSON(),t):"object"==typeof e?(t=t?{obj:e,parent:t}:{obj:e},function r(e,t,n){return n||(t.parent?r(e,t.parent,t.parent.obj===e):!1)}(e,t)?n("[circular reference]"):e instanceof Array?["[",e.map(function(e){return n(e,t)}).join(","),"]"].join(""):["{",Object.keys(e).filter(function(t){return void 0!==e[t]}).map(function(r){return['"',r,'"',":",n(e[r],t)].join("")}).join(","),"}"].join("")):"string"==typeof e?['"',e,'"'].join(""):e}function r(e,t){return t.reduce(function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t},{})}function o(e,t,o){return o&&(e=r(e,o),t=r(t,o)),n(e)===n(t)}function u(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(e[n]);return t}function c(){var e=[];return{selectiveCompoundInterceptor:function(n){return e.filter(function(e){return o(e.descriptor,n,Object.keys(e.descriptor))}).map(function(e){return e.interceptor(n)}).reduce(t,void 0)},addSelectiveInterceptor:function(t,n){var r={descriptor:t,interceptor:n};return e.push(r),r},removeSelectiveInterceptor:function(t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}}function i(n){var r={};return Object.defineProperty(r,"@@proxyOf",{enumberable:!1,writable:!1,value:n}),Object.keys(n).forEach(function(o){if("function"==typeof n[o])Object.defineProperty(r,o,{enumerable:!0,get:function(){return function(){var r,c=u(arguments);if(r=p.map(function(e){return e({object:n,fn:o,type:"invoke",args:c})}).reduce(t,void 0),e(r))return r;var i=n[o].apply(n,arguments);return r=p.map(function(e){return e({object:n,fn:o,type:"return",args:c,value:i})}).reduce(t,void 0),r||i}},set:function(){}});else{var c="object"==typeof n[o]?i(n[o]):null;Object.defineProperty(r,o,{enumerable:!0,get:function(){var r=p.map(function(e){return e({object:n,property:o,type:"get",value:n[o]})}).reduce(t,void 0);return e(r)?r:c?c:n[o]},set:function(r){var u=p.map(function(e){return e({object:n,property:o,type:"set",value:n[o],newValue:r})}).reduce(t,void 0);n[o]=e(u)?u:"object"==typeof r?c=i(r):r}})}}),Object.seal(r)}var f,p=[];return f=c(),p.push(f.selectiveCompoundInterceptor),{proxy:i,intercept:function(e){p.push(e)},when:function(e){return{of:function(t){function n(e){return function(t){var n=f.addSelectiveInterceptor(e,t);return{remove:function(){f.removeSelectiveInterceptor(n)}}}}return t["@@proxyOf"]&&(t=t["@@proxyOf"]),"function"==typeof t[e]?{isInvoked:function(){return{then:n({object:t,type:"invoke",fn:e})}},isInvokedWith:function(){return{then:n({object:t,type:"invoke",fn:e,args:u(arguments)})}},returns:function(){return{then:n({object:t,type:"return",fn:e})}},returnsWith:function(r){return{then:n({object:t,type:"return",fn:e,value:r})}}}:{isSet:function(){return{then:n({object:t,type:"set",property:e})}},isSetTo:function(r){return{then:n({object:t,type:"set",property:e,newValue:r})}},isAccessed:function(){return{then:n({object:t,type:"get",property:e})}}}}}}}}});

//# sourceMappingURL=interceptor.min.js.map